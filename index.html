<body>
    <h1>Hello!</h1>
    <input type="text" id="myInput" /> <button onclick="getLink()">get link</button>
    <br />
    <h2>Text</h2>
    <p id="fullText"></p>
    <script>
        let mySearchParams = new URLSearchParams(window.location.search);
        for (const [key, value] of mySearchParams) {
            if (key == "copy") {
                // Get the text field
                var copyText = document.getElementById("myInput");

                // Select the text field
                copyText.select();
                copyText.setSelectionRange(0, 99999); // For mobile devices

                // Copy the text inside the text field
                navigator.clipboard.writeText(value);
                copyText.value = value;
                // // Alert the copied text
                // alert("Copied the text: " + value);
                var fullText = document.getElementById("fullText");
                fullText.innerHTML = value;
            }
        }
        function getLink() {
            //generate link based on current url and input
            var input = document.getElementById("myInput");
            var url = window.location.href;
            var newUrl = url.split("?")[0] + "?copy=" + input.value;
            newUrl = newUrl.replace(/\s/g, "%20");

            // Get the text field
            var copyText = document.getElementById("myInput");

            // Select the text field
            copyText.select();
            copyText.setSelectionRange(0, 99999); // For mobile devices

            // Copy the text inside the text field
            navigator.clipboard.writeText(newUrl);

            alert("Copied the text: " + newUrl);
        }
    </script>
</body>